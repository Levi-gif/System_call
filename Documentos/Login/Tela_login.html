<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>System Call</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">

</head>

<body>
    <div align="center" class="logo">
        <img src="/Imagens/logo.png" width="180">
    </div>


    <form id="form">
        <h3 align="center">Bem vindo a sua rede de Chamados</h3>

        <fieldset>
            <!-- Fieldset são utilizados para agrupar dados semelhantes-->

            <div id="resposta"></div>

            <legend>Faça o Login</legend>
            <div>
                <label for="login">Login:</label>
                <!-- Label quer dizer etiqueta ou rotulo serve pra identificar as caixas de texto, onde mais importante vai ser o id="nome" onde irá definir dentro do label com o atributo for="nome" que utiliza o mesmo valor definido no id, que assim o <label> será associado ao <input> a 2º maneira é envolver o <label> ao <input> </label> nesse caso npode ser até removido o for="..." -->
                <input type="text" id="login" placeholder="login">
            </div>
            <div>
                <label for="password">Senha:</label>
                <input type="password" id="password" placeholder="password">
            </div>

            <div class="button">
                <button type="submit">Entrar</button>
            </div>

        </fieldset>
    </form>

    <footer>
        <div class="rodape"> Elaborado pela equipe do projeto System Call - 2020</div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>

        document.getElementById('form').addEventListener('submit', function(e){
            e.preventDefault()
            $.ajax({
                type: 'post',
                contentType: 'application/json',
                url: "https://softrec.com.br/login/",
                data: JSON.stringify({
                    email: document.getElementById('login').value,
                    senha: document.getElementById('password').value
                }),
                dataType: 'json',
            }).then(function (data) {
                console.log(data)
                document.getElementById('resposta').innerHTML = ''
                window.location = '/Documentos/Admin/Tela_solicitacaodechamado.html'
            }).always(function (jXHR) {
                if(jXHR != undefined){
                    if(jXHR.status = 404){
                        document.getElementById('resposta').innerHTML = '<strong style="color:red;">E-mail ou senha incorretos</strong>'
                    }
                }
            });
        })

        $(document).ready(function () {
            
        });
    </script>
</body>
</html>